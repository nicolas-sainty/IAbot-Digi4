{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///Users/nahiabidegainberry/%F0%9F%92%BBEPITECH/4e%CC%80me%20anne%CC%81e/IAbot-Digi4/lib/supabase.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\nconst supabaseServiceKey = process.env.SERVICE_ROLE_KEY\nexport const supabase = createClient(supabaseUrl, supabaseServiceKey)\n\n// Fonction de test de connexion\nexport async function testConnection() {\n  try {\n    const { data, error } = await supabase.from('chat').select('*').limit(1)\n    \n    if (error) {\n      console.error('Erreur de connexion:', error.message)\n      return false\n    }\n    \n    console.log('Connexion réussie!')\n    return true\n  } catch (error) {\n    console.error('Erreur:', error.message)\n    return false\n  }\n} "],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AACN,MAAM,qBAAqB,QAAQ,GAAG,CAAC,gBAAgB;AAChD,MAAM,WAAW,CAAA,GAAA,yLAAA,CAAA,eAAY,AAAD,EAAE,aAAa;AAG3C,eAAe;IACpB,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,QAAQ,MAAM,CAAC,KAAK,KAAK,CAAC;QAEtE,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,wBAAwB,MAAM,OAAO;YACnD,OAAO;QACT;QAEA,QAAQ,GAAG,CAAC;QACZ,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,WAAW,MAAM,OAAO;QACtC,OAAO;IACT;AACF"}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///Users/nahiabidegainberry/%F0%9F%92%BBEPITECH/4e%CC%80me%20anne%CC%81e/IAbot-Digi4/lib/queries.ts"],"sourcesContent":["// Créer un supebase client\nimport { supabase } from './supabase'\n\n// Créer une fonction pour récupérer les messages\n\nexport async function getChats() {\n  const { data, error } = await supabase.from('chat').select('*')\n  if (error) throw error\n  return data\n}\n\nexport async function createChat( title: string ) {\n  const { data, error } = await supabase.from('chat').insert({ title: title, created_at: new Date().toISOString()  })\n  if (error) throw error\n  return data\n}\n\nexport async function getMessages(chatId: string) {\n  const { data, error } = await supabase.from('message').select('*').eq('chat_id', chatId)\n  if (error) throw error\n  return data\n}\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;;AAC3B;;AAIO,eAAe;IACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,iHAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,QAAQ,MAAM,CAAC;IAC3D,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAEO,eAAe,WAAY,KAAa;IAC7C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,iHAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,QAAQ,MAAM,CAAC;QAAE,OAAO;QAAO,YAAY,IAAI,OAAO,WAAW;IAAI;IACjH,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAEO,eAAe,YAAY,MAAc;IAC9C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,iHAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,WAAW,MAAM,CAAC,KAAK,EAAE,CAAC,WAAW;IACjF,IAAI,OAAO,MAAM;IACjB,OAAO;AACT"}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///Users/nahiabidegainberry/%F0%9F%92%BBEPITECH/4e%CC%80me%20anne%CC%81e/IAbot-Digi4/app/api/chat/route.ts"],"sourcesContent":["import { openai } from \"@ai-sdk/openai\";\nimport { streamText } from \"ai\";\nimport { createChat, getChats } from \"@/lib/queries\";\n\nexport async function POST(req: Request) { \n    const { messages } = await req.json();\n    const result = await streamText({\n        model: openai(\"gpt-4o-mini\"),\n        messages,\n        system: \"You are a helpful assistant.\",\n        onChunk: (chunk) => {\n            console.log(\"chunk\", chunk);\n        }\n    });\n    for await (const textPart of result.textStream) {\n        console.log(textPart);\n      }\n\n    const chats = await createChat(\"Chat 1\");\n    console.log(chats);\n    console.log(result);\n    console.log(result.toDataStreamResponse());\n    return result.toDataStreamResponse();\n}\n\n// Générer un titre avec les premiers mots du message de l'utilisateur"],"names":[],"mappings":";;;AAEA;AADA;AADA;;;;AAIO,eAAe,KAAK,GAAY;IACnC,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAI,IAAI;IACnC,MAAM,SAAS,MAAM,CAAA,GAAA,sJAAA,CAAA,aAAU,AAAD,EAAE;QAC5B,OAAO,CAAA,GAAA,yJAAA,CAAA,SAAM,AAAD,EAAE;QACd;QACA,QAAQ;QACR,SAAS,CAAC;YACN,QAAQ,GAAG,CAAC,SAAS;QACzB;IACJ;IACA,WAAW,MAAM,YAAY,OAAO,UAAU,CAAE;QAC5C,QAAQ,GAAG,CAAC;IACd;IAEF,MAAM,QAAQ,MAAM,CAAA,GAAA,gHAAA,CAAA,aAAU,AAAD,EAAE;IAC/B,QAAQ,GAAG,CAAC;IACZ,QAAQ,GAAG,CAAC;IACZ,QAAQ,GAAG,CAAC,OAAO,oBAAoB;IACvC,OAAO,OAAO,oBAAoB;AACtC,EAEA,sEAAsE"}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}